#### 目录介绍
- 01.Xposed简单介绍
- 02.Xposed的构成
- 03.初始化流程说明



### 01.Xposed简单介绍
- Xposed 是 Android 平台上著名的 Java 层 Hook 框架，通过在 Android 设备上安装 Xposed 框架，编写 Xposed 模块，可实现对任意 Android 应用的 Java 方法的 Hook，以及应用资源的替换。
- Hook 是一种函数钩子技术，能够对函数进行接管，从而修改函数的返回值，改变函数的原始意图。
- 通过了解 Xposed 的实现原理可以学到在 Android 平台上对于 Java 层代码的一种 Hook 机制的实现，同时复习 Android 系统的启动原理以及增加对于 Android ART 虚拟机运行原理的了解。




### 02.Xposed的构成
- Xposed的构成
    - Xposed	Xposed框架Native部分
    - XposedBridge	Xposed向开发者提供的API与相应工具类库
    - XposedInstaller	Xposed框架Android端本地管理，环境框架，以及第三方module资源下载的工具
- Xposed
    - 仓库地址：https://github.com/rovo89/Xposed
    - Xposed Native 层代码的实现，主要修改了系统 app_process 的实现（即 zygote 服务进程的实现），为将 Hook 代码注入每个应用进程提供了入口。
- XposedBridge
    - 仓库地址：https://github.com/rovo89/XposedBridge
    - Xposed Java 层的代码，它将单独作为一个 jar 包的形式通过 zygote 的分裂（fork）注入到每一个应用进程中，内部会 Xposed 模块，并为 Xposed 模块中的 Hook 操作提供 API 支持。
- XposedInstaller
    - 仓库地址：https://github.com/rovo89/XposedInstaller
    - 统一管理 Xposed 框架的 Android 应用，也是一个 Xposed 框架安装器，用于安装更新 Xposed 框架核心以及作为统一管理 Xposed 模块安装的模块管理器。
- android_art
    - 仓库地址：https://github.com/rovo89/android_art
    - Xposed 修改后的 Android ART 虚拟机的实现，将编译出 libart.so 和其依赖库，替换系统的 ART 虚拟机实现。包含方法 Hook 的核心实现。
    - 这个仓库最新分支是基于 Android Nougat MR2 源码修改的 ART 代码，目前 Xposed 最新版本支持到了 Android 8.1 系统，说明作者没有开源出最新代码，不过都是基于 ART 实现的 Hook，核心 Hook 实现是一致的，不影响分析。
- XposedTools
    - 仓库地址：https://github.com/rovo89/XposedTools
    - 用于编译 Xposed 框架的脚本工具。
    - 目前只分析 Xposed 的实现，不需要对 Xposed 进行定制，所以先不关注 XposedTools 这个项目。




### 03.初始化流程说明
- xposed的主要接口在XposedBrigde.jar中，核心功能在替换的虚拟机中实现。
- app_process是Android App的启动程序（具体形式是zygote fork() 调用app_process作为Android app的载体）。
- ![image](https://gitee.com/leeboyce/imagebed/raw/20200305-image/uPic/xposed%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B.png)



























