#### 目录介绍
- 01.整体概述
    - 1.1 项目背景
    - 1.2 合规处理方式
    - 1.3 基础概念介绍
    - 1.4 设计目标
    - 1.5 产生收益分析
- 02.隐私合规测什么
    - 2.1 隐私合规是什么
    - 2.2 为何做隐私合规
- 03.权限合规检测
    - 3.1 早期的注册权限
    - 3.2 动态权限授予
- 04.隐私合规检测
    - 4.1 隐私合规检查什么
- 05.隐私和权限遇到坑
    - 5.1 
- 06.方案基础设计
    - 6.1 整体架构图
    - 6.2 UML设计图
    - 6.3 关键流程图
    - 6.4 接口设计图
    - 6.5 模块间依赖关系
- 07.其他设计说明
    - 7.1 性能设计
    - 7.2 稳定性设计
    - 7.3 灰度设计
    - 7.4 降级设计
    - 7.5 异常设计
- 08.其他说明介绍
    - 8.1 参考链接


### 01.整体概述
#### 1.1 项目背景
- 最关键的问题是用户同意隐私协议之前，不能有收集用户隐私信息的行为，例如获取deviceId、androidId等信息，除此之外，对于频繁申请权限、超范围申请权限也是需要注意的。
- 除了开迭代针对性整改，从技术角度思考，有没有一劳永逸的办法，杜绝隐私调用不合规问题呢？



#### 1.2 遇到问题


#### 1.3 基础概念介绍


#### 1.4 设计目标


#### 1.5 产生收益分析


### 02.隐私合规测什么
#### 2.1 隐私合规是什么
- 对客户端而言，权限隐私可分为权限和隐私两个大的方面。
- 权限为用户通过app内弹窗设置或者手机设置内对应app的权限设置方式给予对应app相应的权限
    - 如电话权限，定位权限，相机权限，浮窗权限，读写权限等。
- 隐私为app使用过程中与用户个人相关的个人信息
    - 如所在位置，Mac地址，设备id等。就Android端而言，多数隐私信息需要对应授权后才能获取，但目前仍存在部分隐私信息无需授权就可以拿到的。


#### 2.2 为何做隐私合规
- 大众隐私意识觉醒，权限隐私安全性差会直接导致用户不愿使用；日趋严格的权限治理和隐私安全治理，工信部和市场的严格管控；
- 客户端作为与用户最直接的交互信息收集入口，有义务合规化的收集和使用用户信息。



### 03.权限合规检测
#### 3.1 早期的注册权限
- Android6.0(SDK版本为23)之前的版本
    - 安装App页面会列出当前app所注册的所有权限，无同意与否按钮，只有安装和取消，开发App时只需要在清单文件中注册所需的对应权限即可


#### 3.2 动态权限授予
- Android自6.0(SDK版本为23)开始，将权限分为普通权限，危险权限，特殊权限。
    - 而其中的危险权限需要在调用某些系统方法之前需要用户手动授予对应权限，包括PHONE,LOCATION,STORAGE等多个权限组。如果在没授权的情况下直接调用相关方法，就会抛出，应用也随之崩溃。
    ``` java
    java.lang.SecurityException: getDeviceId: has android.permission.READ_PHONE_STATE.
    ```
    - 而要解决以上的报错问题，可以自行封装权限处理类工具，也可使用一些开源的权限工具进行处理。
- 权限判断的代码离不开这几处核心逻辑
    ``` java
    //判断某个权限是否已经被同意
    ContextCompat.checkSelfPermission(context, perm) ==  PackageManager.PERMISSION_GRANTED)
    //请求某个权限，调用后会弹出权限系统弹窗
    ActivityCompat.requestPermissions((Activity) object, perms, requestCode);
    ```
    - 注：如果用户拒绝权限且不让再次显示系统权限授权弹窗的话，最好是提供端内可点击进入手机系统的权限设置页面以让用户可以选择开启对应权限。
      
      




### 08.其他说明介绍
#### 8.1 参考链接
- http://www.45fan.com/article.php?aid=1yyCmAXXM31pnFuG



